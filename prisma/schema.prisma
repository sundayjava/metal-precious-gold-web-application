generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model Product {
  id             String    @id @default(auto()) @map("_id") @db.ObjectId
  title          String
  price          Float
  discount       Float?
  sku            String
  productYear    String?
  percent        Float?
  quantity       Int
  parentcategory String?
  childcategory  String?
  subcategory    String?
  overview       String?
  mintmark       String?
  thickness      Float
  purity         String?
  weight         Float?
  weightoz       Float?
  diameter       Float?
  length         Float?
  width          Float?
  history        String?
  cartItem       CartItem?
  imageUrl       String[]
  createdAt      DateTime  @default(now())
  updatedAt      DateTime  @updatedAt
}

model User {
  id        String @id @default(auto()) @map("_id") @db.ObjectId
  firstname String
  lastname  String
  email     String
  password  String
  cart      Cart?
}

model CartItem {
  id              String  @id @default(auto()) @map("_id") @db.ObjectId
  cart            Cart    @relation(fields: [cartId], references: [id])
  cartId          String  @db.ObjectId
  product         Product @relation(fields: [productId], references: [id])
  productId       String  @unique @db.ObjectId
  quantity        Int
  price           Float
  discountedPrice Float
}

model Cart {
  id                   String     @id @default(auto()) @map("_id") @db.ObjectId
  user                 User       @relation(fields: [userId], references: [id])
  userId               String     @unique @db.ObjectId
  cartItems            CartItem[]
  totalPrice           Float?
  totalItem            Int
  totalDiscountedPrice Float
  discount             Float
}
